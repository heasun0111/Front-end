## 네트워크

#### #1 처리량, 지연시간

네트워크란 노드와 링크가 서로 연결되어 있으며 리소스를 공유하는 집합
노드: 서버, 라우터, 스위치 등 네트워크 장치
링크: 유선, 무선

많은 처리량을 처리, 지연 시간 짧고, 장애 빈도가 적고, 좋은 보안 갖춤 -> 좋은 네트워크

처리량: 링크를 통해 전달되는 단위 시간당 데이터양
처리량은 사용자들이 많이 접속할 때 마다 커지는 트래픽, 네트워크 장치 간의 대역폭, 네트워크 중간에 발생하는 에러 등에 영향
*트래픽(traffic)이란 서버와 스위치 등 네트워크 장치에서 일정 시간 내에 흐르는 데이터의 양을 말한다.

대역폭: 주어진 시간 동안 네트워크 연결을 통해 흐를 수 있는 최대 비트 수

지연 시간: 요청이 처리되는 시간, 어떤 메시지가 두 장치 사이를 왕복하는데 걸린 시간

</br> </br>

#### #2 네트워크 토폴로지와 병목 현상
네트워크 토폴로지는 노드와 링크가 어떻게 배치되어 있는지에 대한 방식 및 연결 형태

-트리 토폴로지
 계층형 토폴로지
 장) 노드의 추가/삭제가 쉽다
 단) 특정 노드에 트래픽이 집중될 때 하위 노드에 영향을 끼칠 수 있다

-버스 토폴로지
 중앙 통신 회선 하나에 여러 개의 노드가 연결되어 공유하는 구성
 근거리 통신망(LAN)에서 사용
 장) 설치 비용이 적고, 신뢰성이 우수하며 중앙 통신 회선에 노드를 추가하거나 삭제하기 쉽다.
 단) 그러나 스푸핑이 가능한 문제!
*스푸핑: LAN상에서 송신부의 패킷을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비시키거나 속여서 특정 노드에 해당 패킷이 오도록 처리하는 것

-스타 토폴로지
 중앙에 있는 노드에 모두 연결된 네트워크 구성
 장) 노드를 추가하거나 에러를 탐지하기 쉽고 패킷의 충돌 발생 가능성이 적다
 어떠한 노드에 장애가 발생해도 쉽게 에러를 발견, 장애 노드가 중앙 노드가 아닐 경우 다른 노드에 영향을 끼치는 것이 적다
 단) 중앙 노드에 장애가 발생하면 전체 네트워크를 사용할 수 없고 설치 비용이 고가이다




-링형 토폴로지
 각각의 노드가 양 옆의 두 노드와 연결하여 전체적으로 고리처럼 하나의 연속된 길을 통해 통신을 하는 망 구성 방식
 데이터는 노드에서 노드로 이동을 하게 되며, 각각의 노드는 고리 모양의 길을 통해 패킷을 처리
장) 노드 수가 증가되어도 네트워크상의 손실이 거의 없고 충돌이 발생되는 가능성이 적고, 노드의 고장 발견을 쉽게 찾을 수 있다
단) 네트워크 구성 변경이 어렵고 회선에 장애가 발생하면 전체 네트워크에 영향을 크게 끼친다

-메시 토폴로지
메시(mesh) 토폴로지는 망형 토폴로지라고도 하며 그물망처럼 연결
장) 한 단말 장치에 장애가 발생해도 여러 개의 경로가 존재하므로 네트워크를 계속 사용할 수 있고 트래픽도 분산 처리 가능
단) 노드의 추가가 어렵고 구축 비용과 운용 비용이 고가


토폴로지는 병목 현상을 찾을 때 중요한 기준!!
*병목 현상: 전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상

</br> </br>

#### #3 LAN, MAN, WAN
네트워크를 규모 기반으로 분류할 시 LAN, MAN, WAN으로 나눌 수 있다.

LAN (Local Area Network)
근거리 통신망 (사무실, 개인적으로 소유 가능한 규모)
전송 속도가 빠르고 혼잡하지 않다.

MAN (Metropolitan Area Network)
대도시 지역 네트워크 (서울시 정도 규모)
전송 속도는 평균이며 LAN보다는 더 많이 혼잡하다.

WAN (Wide Area Network)
광역 네트워크를 의미 (국가, 대륙 같은 넓은 지역)
전송 속도는 낮으며 MAN보다 더 혼잡하다.

</br> </br>

#### TCP/IP 4계층 모델과 OSI 7계층
인터넷 프로토콜 스위트는 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 프로토콜의 집합이며, 이를 TCP/IP 4계층 모델로 설명하거나 OSI 7계층 모델로 설명하기도 합니다.
</br>

TCP/IP 4계층 : 애플리케이션 계층 – 전송 계층 – 인터넷 계층 – 링크 계층
OSI 7계층 : (애플리케이션 – 프레젠테이션 – 세션) – 전송 – 네트워크 – (데이터 링크 – 물리)
</br>

-> TCP/IP계층과 달리 OSI계층은 애플리케이션을 3개로 쪼개고, 링크 계층을 링크, 물리 계층으로 나눠서 표현하며, 인터넷 계층을 네트워크 계층으로 부른다는 점이 다르다.
</br>

#이 계층들은 특정 계층이 변경되었을 때 다른 계층이 영향을 받지 않도록 설계되었습니다.
예를 들어 전송 계층에서 TCP를 UDP로 변경했다고 해서 인터넷 웹 브라우저를 다시 설치 하는게X
</br>

##### 애플리케이션 계층</br>
응용 프로그램이 사용되는 프로토콜 계층 / 웹 서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공하는 층
ex) FTP-파일 전송, HTTP-웹서비스 통신의 시초, SSH-암호화 네트워크 프로토콜, SMTP-메일 프로토콜, DNS-도메인 이름과 IP주소를 매핑해주는 서버

##### 전송 계층</br>
송신자와 수신자를 연결하는 통신 서비스를 제공하며 애플리케이션과 인터넷 계층 사이의 데이터가 전달될 때의 중계 역할을 한다. 대표적으로 TCP, UDP가 있으며, 다음과 같은 기능을 포함한다.

-연결지향 통신(TCP)</br>
-신뢰성 : 체크섬과 오류감지 코드를 통해 패킷 손실을 방지하며 ACK세그먼트 등으로 수신을 확인, UDP는 체크섬만으로 기본 오류 감지 코드만 제공, TCP는 전부
-흐름제어 : 송신측과 수신측의 데이터 처리 속도 차이를 해결하기 위한 기법
-혼잡제어 : 네트워크 내에 패킷의 수가 과도하게 증가하는 현상을 방지, 제거

##### 인터넷 계층</br>
장치로부터 받은 네트워크 패킷을 IP주소로 지정된 목적지로 전송하기 위해 사용되는 계층
IP, ARP, ICMP등이 있으며 패킷을 수신해야 할 상대의 주소를 지정하여 데이터를 전달합니다. 상대방이 제대로 받았는지에 대해 보장하지 않는 비연결형적인 특징을 가지고 있다.


##### 링크 계층 </br>
전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치 간에 신호를 주고받는 ‘규칙’을 정하는 계층. 참고로 네트워크 접근 계층이라고도 한다.
이를 물리 계층과 데이터 링크 계층으로 나누기도 한다.
물리 계층은 무선 LAN과 유선 LAN을 통해 0과 1로 이루어진 데이터를 보내는 계층을 말하며
데이터 링크 계층은 ‘이더넷 프레임’을 통해 에러 확인, 흐름 제어, 접근 제어를 담당하는 계층을 말한다.


# TCP와 UDP의 차이
TCP - 패킷 사이의 순서를 보장하고 연결지향 프로토콜(3웨이 핸드쉐이크)을 사용해서 연결하고 신뢰성을 구축해서 수신 여부를 확인하며 *가상회선 패킷 교환 방식을 사용한다.
UDP – 순서를 보장하지 않고 수신 여부를 확인하지 않으며 단순히 데이터만 주는 *데이터그램 패킷 교환 방식을 사용

*가상회선 패킷 교환 방식
각 패킷에서 가상회선 식별자가 포함되며 모든 패킷을 전송하면 가상회선이 해제되고 패킷들은 전송된 ‘순서대로’ 도착하는 방식을 말한다.

*데이터그램 패킷 교환 방식
패킷이 독립적으로 이동하며 최적의 경로를 선택하여 가는데, 하나의 메시지에서 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있으며 도착한 ‘순서가 다를 수’있는 방식을 뜻한다.


#데이터를 전송하는데 발생하는 오류의 종류 3가지
(TCP는 다 방지 및 제거 가능, UDP는 내부손상만 가능)
-패킷의 잘못된 순서 (TCP는 시퀀스)
-패킷 손실 (TCP는 재전송 가능)
-패킷 내부의 손상된 데이터 (UDP, TCP 모두 체크섬을 기반으로 체크)

체크섬 : 헤더, 패킷 내용, IP등을 기반으로 체크섬을 만들어 패킷 내부의 데이터 손상을 파악

 


# TCP 3웨이 핸드쉐이크, 4웨이 핸드쉐이크
**참고**
SYN – SYNchronization의 약자, 연결 요청 플래그
ACK – ACKnowledgement의 약자, 응답 플래그
ISN – Initial Sequence Numbers의 약어, 초기 네트워크 연결할 때 할당된 32비트 고유 시퀀스 번호

TCP는 신뢰성을 확보할 때 ‘3-웨이 핸드셰이크’라는 작업을 진행합니다. (연결성립 과정)
1. SYN단계
클라이언트는 서버에 (클라이언트의 ISN을) 담아 SYN을 보냅니다.
ISN은 새로운 TCP 연결의 첫 번째 패킷에 할당된 임의의 시퀀스 번호를 말하며 이는 장치마다 다를 수 있다.
2. SYN+ACK 단계
서버는 클라이언트의 SYN을 수신하고 서버의 ISN을 보내며 승인번호로 클라이언트의 ISN +1을 보냅니다.
3. ACK 단계
클라이언트는 서버의 ISN +1한 값인 승인번호를 담아 ACK를 서버에 보냅니다. 이렇게 3-웨이 핸드셰이크 과정 이후 신뢰성이 구축되고 데이터 전송을 시작합니다. 
참고로 TCP는 이 과정이 있기 때문에 신뢰성이 있는 계층이라고 하며 UDP는 이 과정이 없어서 신뢰성이 없는 계층입니다.

TCP가 연결을 해제할 때는 4-웨이 핸드셰이크 과정이 발생 (연결해제 과정)
1번 : 먼저 클라이언트가 연결을 닫으려고 할 때 FIN으로 설정된 세그먼트를 보냅니다.
그리고 클라이언트는 FIN_WAIT_1 상태로 들어가고 서버의 응답을 기다립니다.

2번 : 서버는 클라이언트로 ACK라는 승인 세그먼트를 보냅니다. 그리고 CLOSE_WAIT 상태에 들어갑니다. 클라이언트가 세그먼트를 받으면 FIN_WAIT_2상태에 들어갑니다.

3번 : 서버는 ACK를 보내고 일정 시간 이후에 클라이언트에 FIN이라는 세그먼트를 보냅니다.

4번 : 클라이언트는 TIME_WAIT상태가 되고 다시 서버로 ACK를 보내서 서버는 CLOSED상태가 됩니다. 이후 클라이언트는 어느 정도의 시간을 대기한 후 연결이 닫히고 클라이언트와 서버의 모든 자원의 연결이 해제됩니다.

# 일정 시간 뒤에 닫는 이유! (TIME_WAIT)
1. 지연 패킷이 발생할 경우를 대비하기 위함
패킷이 뒤늦게 도달하고 이를 처리하지 못하면 데이터 무결성 문제가 발생


# IP와 라우팅





</br> </br>

#### #3 브라우저 렌더링 과정
1. DOM 트리 구축
 하나의 html 페이지는 div, span 등 각각의 요소를 가집니다. 각 요소는 하나하나 노드로 설정이 되어 트리 형태로 저장되는데, 이를 DOM 트리라고 한다.

2. 렌더트리와 렌더레이어 생성
각각의 노드는 CSS파서에 의해 정해진 스타일 규칙이 적용되어 있다. 
이런 규칙에 따라 CSSOM이라는 트리가 만들어지고 
미리 만들어놓은 DOM트리 내에 있는 노드와 함께 렌더 객체가 생성되며
이들이 모여 병렬적인 렌더트리가 생성된다.

이때 display:none이 포함된 노드는 지워지고 font-size 등 상속적인 스타일은 부모노드에만 위치하도록 설계하는 등의 최적화를 거쳐 렌더레이어가 완성된다.

3. 렌더레이어를 대상으로 Layout 설정
이때 좌표는 보통 부모를 기준으로 설정됩니다. Global Layout은 브라우저 사이즈가 증가하거나 폰트 사이즈가 커지면 변경된다.

4. 렌더레이어를 대상으로 칠하기
픽셀마다 점을 찍듯 칠합니다. 이를 레스터화라고도 합니다.

5. 레이어 합치기 및 표기
각각의 레이어로부터 비트맵이 생성되고 GPU에 텍스처로 업로드됩니다.
그 다음 텍스처들은 서로 합쳐져 하나의 이미지로 렌더링되며 화면으로 출력됩니다.


Q. 렌더객체와 렌더레이어는 1:1 대응일까요?
A. No
display:none으로 사라지는 노드들이 있을 수 있기 때문
하지만 DOM트리와 렌더트리는 1:1 대응
이렇게 렌더트리가 생성된 후 렌더레이어에 올려진다.
렌더레이어가 완성될 때 GPU에서 처리되는 부분이 있으면 이 요소들은 각각 강제적으로 그래픽 레이어로 분리

DOM --(1:1)o--> 렌더트리 --(1:1)x--> 렌더레이어
